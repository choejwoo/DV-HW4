<!DOCTYPE html>

<html lang="en" dir="ltr">


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" href="DayandNight.css" type="text/css">
<head>
  <meta charset="utf-8">
  <title>교통사고 사상자 통계 분석 페이지</title>
</head>

<body>




  <nav class="navbar navbar-expand-lg navbar-dark bg-primary" style="font: bold">
    <a class="navbar-brand" href="#"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>


        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/Home.html">홈</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/DayandNight.html">주, 야간 <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/CarClassification.html">차량 종류</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/Population.html">인구 수</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/RoadType.html">도로 형태</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/Map.html">지역</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://choejwoo.github.io/DV-HW4/OverallAnalysis.html">종합</a>
            </li>
          </ul>
        </div>
  </nav>

<div class = "container">


    <svg width="800" height="500"></svg>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>
      var dayofNight = [];
      var dayofNoon = [];

      var daycount = 0;

      d3.csv("DV/accidents.csv", function(error, data) {


        data.forEach(function(d) {
          if (d.요일 == "월" && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '월',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '화' && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '화',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '수' && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '수',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '목' && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '목',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '금' && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '금',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '토' && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '토',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '일' && d.주야 == "주간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNoon.push({
          x: '일',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == "월" && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '월',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '화' && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '화',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '수' && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '수',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '목' && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '목',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '금' && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '금',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '토' && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '토',
          y: daycount
        });
        daycount = 0;

        data.forEach(function(d) {
          if (d.요일 == '일' && d.주야 == "야간")
            daycount = daycount + parseInt(d.사망자수);
        });
        dayofNight.push({
          x: '일',
          y: daycount
        });
        daycount = 0;

        console.log(dayofNight);

        var svg = d3.select("svg");
        var width = parseInt(svg.style("width"), 10) - 30;
        var height = parseInt(svg.style("height"), 10) - 20;

        var svgG = svg.append("g")
          .attr("transform", "translate(30,0)");

        var svgG2 = svg.append("g")
          .attr("transform", "translate(30,0)");

        var yScale = d3.scaleLinear()
          .domain([0, d3.max(dayofNoon, function(d) {
            return d.y;
          })])
          .range([height, 30]);

        var xScale = d3.scaleBand()
          .domain(dayofNoon.map(function(d) {
            return d.x;
          }))
          .range([0, width]).padding(0, 50);

        svgG.selectAll("rect")
          .data(dayofNoon)
          .enter().append("rect")
          .attr("class", "bar")
          .attr("height", function(d, i) {
            return height - yScale(d.y)
          })
          .attr("width", xScale.bandwidth() - 80)
          .attr("x", function(d, i) {
            return xScale(d.x) + 25
          })
          .attr("y", function(d, i) {
            return yScale(d.y)
          });

        svgG.selectAll("text")
          .data(dayofNoon)
          .enter().append("text")
          .text(function(d) {
            return d.y
          })
          .attr("x", function(d, i) {
            return xScale(d.x) + xScale.bandwidth() / 2 - 15
          })
          .style("text-anchor", "middle")
          .attr("y", function(d, i) {
            return yScale(d.y) + 15
          });


        svgG2.selectAll("rect")
          .data(dayofNight)
          .enter().append("rect")
          .attr("class", "bar2")
          .attr("height", function(d, i) {
            return height - yScale(d.y)
          })
          .attr("width", xScale.bandwidth() - 80)
          .attr("x", function(d, i) {
            return xScale(d.x) + 55
          })
          .attr("y", function(d, i) {
            return yScale(d.y)
          });

        svgG2.selectAll("text")
          .data(dayofNight)
          .enter().append("text")
          .text(function(d) {
            return d.y
          })
          .attr("x", function(d, i) {
            return xScale(d.x) + xScale.bandwidth() / 2 + 15
          })
          .style("text-anchor", "middle")
          .attr("y", function(d, i) {
            return yScale(d.y) + 15
          });


        svgG.append("g")
          .attr("transform", "translate(0," + (height) + ")")
          .call(d3.axisBottom(xScale));

        svgG.append("g")
          .call(d3.axisLeft(yScale).ticks(5));

      });
    </script>
    <div class="dayBox">
      <div style="margin-left : 25px">DayTime</div>
    </div>

    <div class="nightBox">
      <div style="margin-left : 25px">NightTime</div>
    </div>

  </div>


</body>

</html>
